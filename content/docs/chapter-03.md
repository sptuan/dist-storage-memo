---
title: "第三章：分布式篇"
weight: 3
draft: true
---

# 分布式存储漫游指南 3: 复制和分区, 我变复杂了、但也可靠了

- 复制和分区：经典手段
- 分区手段
    - 固定
    - multi-raft
- multi-raft 的分区思路

- 路由需求（重要的顶层设计，影响全局）：
    - ceph, hash 分区
    - 中间：缓存一定路由
    - 每笔 io 必读路由
    - 连续 range-key 区间分区，tikv
    - 连续 key 对比 hash 分区
        - 是否 prefix-list
        - 是否要减少路由量

- 怎样算复制成功？
    - 高一致性的复制
    - 多数派复制
    - 允许丢失的复制，自定义！

- 谁来复制
    - 链式复制
    - 单节点复制

- 数据写入方式（重点）
    - append-only 系统
        - pangu?
        - azure?
    - 覆盖写系统？
        - copy on write???
        - juiceFS？
        - ceph？

- 系统设计：组件和服务
    - 元数据服务（本节只讲角色，不讲实现）
        - 有状态：raft，multi raft
        - 无状态：kv 底座
        - 无状态：自举，存储引擎持久化
        - 优点和缺点
    - 存储引擎（本节只讲角色，不讲实现）（边界定义）
        - 语义：和元数据服务的沟通
        - append-only? 覆盖写
        - 路由模式，直接影响故障修复和均衡模式

章节组织再看看论文的引入
