---
title: "EC 编码和 LRC 编码"
weight: 20
---

{{< callout type="info" >}}
✋🏻😭✋🏻 本小节编辑中 ✍️✍️✍️
{{< /callout >}}

理解本文，读者将收获

- EC/LRC 编码的基本数学原理
- EC/LRC 编码的优势和缺点
- EC/LRC 编码成本和性能核算模型

以下内容超出本文范围
- 如何编写一个工业级的 EC 编解码库

## 技术背景和动机

在前些篇文章中，我们已经使用了很大篇幅去描述 “**复制（增加数据冗余度）**” 的重要性。

一种广泛应用且简单的复制方式即**副本复制**。然而副本复制存在一些问题，使我们不得不寻找更加灵活的编码方式去增加数据冗余度。

单纯使用副本复制，存在以下局限性：
- 只能以数据整数倍扩增，比如 1副本、2副本、3副本等等。
- 一般经验上，结合硬件的故障率，至少需要使用 3 副本才能满足数据的安全性保证。
- 成本因此至少承担 3 倍数据的存储、写带宽。

实际上不是所有的数据都值得使用 3 倍冗余去储存。梳理下就会发现，根本的技术障碍为：**整数倍的冗余**。

**一旦能够打破这个限制，我们能够根据实际的硬件损坏概率，灵活地安排冗余度/成本/性能的平衡**。

因此实际的技术需求变为：我们需要一种编码方式，能够

- 灵活安排数据和冗余的配比
- 冗余信息熵逼近故障容忍所需的熵增量
- 计算相对快速
- 易于理解和控制

Erasure Code (EC) 因符合上述需求，被分布式存储广泛使用。

## Head First EC 编码




## 编码、成本与性能模型

### 冗余度与信息论

### 副本

### EC 编码

### LRC 编码

## 数据安全性模型

### 平均磁盘年故障率

### 集群修复速度

### 编码与数据安全

## 动手做：为用户制定合适的编码策略

## 小结
